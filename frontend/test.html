<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Page - SweetSeek</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f8fafc;
        }
        .test-box {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        h1 { color: #2563eb; }
        button {
            background: #2563eb;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #1d4ed8;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            background: #f1f5f9;
            border-radius: 6px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üîß SweetSeek System Test</h1>
    
    <div class="test-box">
        <h2>File Loading Test</h2>
        <p>CSS Loaded: <span id="cssTest" class="error">‚ùå Not Loaded</span></p>
        <p>JS Loaded: <span id="jsTest" class="success">‚úÖ Loaded</span></p>
    </div>
    
    <div class="test-box">
        <h2>API Test</h2>
        <button onclick="testInit()">Test /api/init</button>
        <button onclick="testStats()">Test /api/stats</button>
        <button onclick="testAsk()">Test /api/ask</button>
        <div id="result"></div>
    </div>
    
    <div class="test-box">
        <h2>Navigation Test</h2>
        <button onclick="location.href='/'">Go to Home</button>
        <button onclick="location.href='/search.html'">Go to Search</button>
        <button onclick="location.href='/management.html'">Go to Management</button>
    </div>
    
    <div class="test-box">
        <h2>Browser Info</h2>
        <p>User Agent: <span id="userAgent"></span></p>
        <p>Window Size: <span id="windowSize"></span></p>
        <p>Current URL: <span id="currentUrl"></span></p>
    </div>

    <script>
        // Check if CSS is loaded
        const testElement = document.createElement('div');
        testElement.style.cssText = 'color: var(--primary-color)';
        document.body.appendChild(testElement);
        const computedColor = window.getComputedStyle(testElement).color;
        if (computedColor !== 'rgb(0, 0, 0)') {
            document.getElementById('cssTest').innerHTML = '‚úÖ Loaded';
            document.getElementById('cssTest').className = 'success';
        }
        document.body.removeChild(testElement);
        
        // Display browser info
        document.getElementById('userAgent').textContent = navigator.userAgent;
        document.getElementById('windowSize').textContent = `${window.innerWidth} x ${window.innerHeight}`;
        document.getElementById('currentUrl').textContent = window.location.href;
        
        // API test functions
        async function testInit() {
            const result = document.getElementById('result');
            result.textContent = 'Testing /api/init...';
            
            try {
                const response = await fetch('/api/init', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                const data = await response.json();
                result.textContent = JSON.stringify(data, null, 2);
                result.style.color = data.success ? '#10b981' : '#ef4444';
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
                result.style.color = '#ef4444';
            }
        }
        
        async function testStats() {
            const result = document.getElementById('result');
            result.textContent = 'Testing /api/stats...';
            
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();
                result.textContent = JSON.stringify(data, null, 2);
                result.style.color = data.success ? '#10b981' : '#ef4444';
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
                result.style.color = '#ef4444';
            }
        }
        
        async function testAsk() {
            const result = document.getElementById('result');
            result.textContent = 'Testing /api/ask...';
            
            try {
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ question: 'Test question' })
                });
                const data = await response.json();
                result.textContent = JSON.stringify(data, null, 2);
                result.style.color = data.success ? '#10b981' : '#ef4444';
            } catch (error) {
                result.textContent = 'Error: ' + error.message;
                result.style.color = '#ef4444';
            }
        }
    </script>
</body>
</html>
